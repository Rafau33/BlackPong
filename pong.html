<html>
    <head>
        <title>
        BlackPong
        </title>
        <link rel="icon" href="grin.ico" type="image/gif" sizes="256x256">
        <meta>
        <style>
            /*
            #rekord{
                
                position:fixed;
            }*/
            #guzik{
                    
                    background-color: #4CAF50; 
                    border: none;
                    color: white;
                    padding: 16px 32px;
                    text-align: center;
                    text-decoration: none;
                    display: inline-block;
                    font-size: 22px;
                    margin: 4px 2px;
                    transition-duration: 0.4s;
                    cursor: pointer;
                    border-radius: 10px;
            }
            #guzik {
                    background-color: white; 
                    color: black; 
                    border: 2px solid black;
            }
            #guzik:hover {
                    background-color:black;
                    color: white;
            }
            
        </style>
    </head>
    <body>
        <br>
        <center>
            <a style="font-size: 40px"onclick="window.open('https://github.com/Rafau33/BlackPong')">BlackPong</a><br>
            <a style="font-size: 30px">Wynik:<a id="punkty" style="font-size: 30px">0</a></a><br>
            <a id="rekord" style="font-size: 30px"></a><br>
            <canvas id="ponk" width="400" height="300" style="border-style:solid;border-radius: 10px;"></canvas><br><br>
            
            <a id="koniec gry" style="font-size: 30px"></a><br><br>
            
        </center>
        <script>    
                    var porazka=0;
                    var punkty=0;                    
                    var y = (2 - Math.random());
                    
                    var x=220 - Math.floor(Math.random() * 100);
                    var z= (2 - Math.random()) ;
                    var w=40- Math.floor(Math.random() * 10);
                    var belkaX = 200;
                    var belkaY = 280;
                    var szczalkaP = 0;
                    var szczalkaL = 0;
                    var rekord = localStorage.getItem('punkty');
                    var c = document.getElementById("ponk");
                    var ctx = c.getContext("2d");
                    if(rekord == null) {
                        rekord = 0;
                    }
                    document.getElementById("rekord").innerHTML = "Rekord:<a id='rekordliczba'></a>";
                    document.getElementById("rekordliczba").innerHTML = rekord;
                    //----------------------------------------------------------------
                    document.addEventListener("keydown", function(event) {
                    
                        
                        if (event.which === 39) {
                            
                            szczalkaP = 1;
                            szczalkaL = 0;
                        }
                        else if (event.which === 37) {
                            
                            szczalkaP = 0;
                            szczalkaL = 1;
                        }
                        else {
                            szczalkaP = 0;
                            szczalkaL = 0;
                        }
                        
                    });

                    document.addEventListener("keyup", function(event) {
                    
                        
                    if (event.which === 39) {
                        
                        szczalkaP = 0;
                    }
                    else if (event.which === 37) {
                        
                        szczalkaL = 0;
                    }

                    
                });
                    //----------------------------------------------------------------
                    function szczalki(){
                        if(szczalkaP == 1){
                            if(belkaX<360){
                                    belkaX=belkaX+1.5;
                            }
                        }
                        if(szczalkaL == 1){
                            if(belkaX>40) {
                                    belkaX=belkaX-1.5;
                            }
                        }
                    }
                
                    

                    function kółko(x,w) {
                        if(x > 390){y *= -1}
                        if(x < 10){y *= -1}Przegrałeś :c
                        if(w > 290){
                            
                            document.getElementById("koniec gry").innerHTML = "Przegrałeś :c<br><br><button id='guzik' onclick='location.reload();'>Nowa gra</button>";
                            porazka=1;

                            if(punkty>rekord*0.7) {
                                document.getElementById("koniec gry").innerHTML = "Prawie rekord<br><br><button id='guzik' onclick='location.reload();'>Nowa gra</button>";

                            }
                            
                            if(punkty>rekord) {
                                localStorage.setItem('punkty', punkty);
                                rekord = localStorage.getItem('punkty');
                                document.getElementById("koniec gry").innerHTML = "Nowy rekord!<br><br><button id='guzik' onclick='location.reload();'>Nowa gra</button>";

                            }
                            
                            document.getElementById("rekordliczba").innerHTML = rekord;
                            setTimeout(function() {
                                
                                document.addEventListener("keydown", function(event) {
                                location.reload();

                            });
                            }, 700);


                            
                        }
                        if(w<10){z *= -1}
                        if (w>(belkaY-10) && x>(belkaX-40) && x<(belkaX+40) && z>0){
                            z*=-1;
                            punkty++;
                            document.getElementById("punkty").innerHTML = punkty;
                            
                        }
                        
                        ctx.beginPath();
                        ctx.arc(x,w,10,0,2*Math.PI);
                        ctx.rect(belkaX-40, belkaY-5, 80, 10);
                        
                        ctx.fillStyle = "black";
                        ctx.fill();
                        
                        
                        
                    }
                   
                    
                    setInterval(function(){

                        ctx.clearRect(0,0,2000,2000);
                        if (porazka==0){
                        szczalki();
                        kółko(x,w);
                        }
                        x=x+y;   
                        w=w+z;
                    }
                    ,0);

        </script>
    </body>
</html>